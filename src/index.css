@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: 'Noto Serif SC', serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: #f4eccd;
  color: #2c2c2c;
  overflow-x: hidden;
}

.ink-gradient {
  background: linear-gradient(to bottom, rgba(44, 44, 44, 0.9), rgba(44, 44, 44, 0.7));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.parchment-bg {
  background-color: #f4eccd;
  background-image: 
    linear-gradient(to bottom, rgba(244, 236, 205, 0.8), rgba(244, 236, 205, 0.6)),
    url('./bg-mountains.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  /* 优化：添加一个平滑过渡，当图片加载完成时显示 */
  transition: background-image 0.5s ease-in-out;
}

.result-bg {
  background-color: #f2e9d2;
  background-image: 
    linear-gradient(to bottom, rgba(242, 233, 210, 0.85), rgba(242, 233, 210, 0.7)),
    url('./bg-mountains.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  transition: background-image 0.5s ease-in-out;
}

/* 纸张纤维纹理 - 更加真实的多层叠加 */
.paper-texture {
  position: absolute;
  inset: 0;
  opacity: 0.15;
  pointer-events: none;
  background-image: 
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
    radial-gradient(circle at 50% 50%, transparent 0%, rgba(0,0,0,0.05) 100%);
  mix-blend-mode: multiply;
}

/* 模拟宣纸的有机边缘阴影 */
.paper-inner-shadow {
  box-shadow: inset 0 0 100px rgba(0,0,0,0.05);
}

/* 高级中式卡片 - 玻璃质感与宣纸感的结合 */
.chinese-card {
  background: rgba(255, 255, 252, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(166, 61, 51, 0.1);
  box-shadow: 
    0 10px 30px -10px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* 动态水墨点缀 */
.ink-smudge {
  position: absolute;
  background: radial-gradient(circle, rgba(44,44,44,0.08) 0%, transparent 70%);
  filter: blur(40px);
  pointer-events: none;
}

/* 传统中式边框装饰 */
.chinese-border {
  border: 1px solid rgba(166, 61, 51, 0.2);
  position: relative;
}

.chinese-border::before,
.chinese-border::after,
.chinese-border > .corner-tl,
.chinese-border > .corner-br {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  border-color: #a63d33;
  border-style: solid;
}

.chinese-border > .corner-tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
.chinese-border > .corner-tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; position: absolute; width: 20px; height: 20px; border-color: #a63d33; border-style: solid; }
.chinese-border > .corner-bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; position: absolute; width: 20px; height: 20px; border-color: #a63d33; border-style: solid; }
.chinese-border > .corner-br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }

.backface-hidden {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.perspective-1000 {
  perspective: 1000px;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(166, 61, 51, 0.3);
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(166, 61, 51, 0.5);
}

/* 水墨效果 - 边缘微晕染 */
.ink-line {
  position: relative;
  background-color: #2c2c2c;
  filter: url(#ink-bleed);
}

.ink-line::after {
  content: '';
  position: absolute;
  inset: -2px;
  background: inherit;
  filter: blur(4px);
  opacity: 0.3;
  z-index: -1;
}

/* 卷轴组件样式 */
.scroll-container {
  position: relative;
  display: flex;
  align-items: stretch;
  justify-content: center;
  filter: drop-shadow(0 20px 30px rgba(0,0,0,0.15));
}

.scroll-body {
  background-color: #e8d5b5;
  background-image: 
    linear-gradient(to right, rgba(0,0,0,0.1) 0%, transparent 2%, transparent 98%, rgba(0,0,0,0.1) 100%),
    linear-gradient(to bottom, transparent 0%, rgba(139, 44, 36, 0.05) 0%, rgba(139, 44, 36, 0.05) 2%, transparent 2%, transparent 98%, rgba(139, 44, 36, 0.05) 98%, rgba(139, 44, 36, 0.05) 100%),
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paperNoise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paperNoise)' opacity='0.05'/%3E%3C/svg%3E");
  box-shadow: inset 0 0 50px rgba(0,0,0,0.05);
  position: relative;
  z-index: 1;
  overflow: hidden;
  border-top: 2px solid #8b2c24;
  border-bottom: 2px solid #8b2c24;
}

.scroll-end {
  width: 32px;
  background: linear-gradient(to right, #8b2c24 0%, #a63d33 30%, #f0a090 45%, #a63d33 60%, #8b2c24 100%);
  position: relative;
  z-index: 2;
  border-radius: 4px;
  box-shadow: 2px 0 10px rgba(0,0,0,0.2), -2px 0 10px rgba(0,0,0,0.2);
}

.scroll-end::before,
.scroll-end::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 44px;
  height: 16px;
  background: radial-gradient(circle at center, #7a251e 0%, #5a1a15 100%);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.scroll-end::before { top: -6px; }
.scroll-end::after { bottom: -6px; }

/* 卷轴内的爻条样式 */
.scroll-hex-line {
  transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
